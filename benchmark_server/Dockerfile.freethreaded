FROM quay.io/pypa/manylinux_2_34_x86_64

ARG PYTHON_VERSION=cp314
ENV PATH="/opt/python/${PYTHON_VERSION}-${PYTHON_VERSION}t/bin:$PATH"

# This means 'do not warn about it' :)
ENV PIP_ROOT_USER_ACTION=ignore

ENV PIP_NO_CACHE_DIR=true
ENV PIP_DISABLE_PIP_VERSION_CHECK=true

# Can be used only on free-threaded builds.
ENV PYTHON_GIL=0

RUN pip install -U pip

COPY servers /usr/src/servers

ARG EASYNETWORK_SDIST

COPY $EASYNETWORK_SDIST /easynetwork.tar.gz
RUN pip install "/easynetwork.tar.gz"
